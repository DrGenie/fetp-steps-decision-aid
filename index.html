<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>STEPS ‚Äì FETP India Decision Aid</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="styles.css" rel="stylesheet" />
</head>
<body>
<div class="app-shell">
    <!-- Header -->
    <header class="app-header">
        <div class="app-header-left">
            <div class="app-logo-circle">S</div>
            <div class="app-title-block">
                <div class="app-title">STEPS ‚Äì FETP India</div>
                <div class="app-subtitle">Scalable Training Estimation and Planning System</div>
            </div>
        </div>
        <div class="app-header-right">
            <div class="header-tagline">
                Scenario planner for <strong>Advanced &amp; Intermediate FETP</strong>
            </div>
            <button type="button" class="btn-header-link" id="header-docs-button">
                <span class="btn-header-link-icon">i</span>
                <span>How to use STEPS</span>
            </button>
            <span class="app-tag">Prototype ‚Äì offline capable</span>
        </div>
    </header>

    <main class="app-main">
        <!-- Tab Bar -->
        <div class="tab-bar">
            <button class="tab-link tablink active" data-tab="tab-intro" type="button">Overview</button>
            <button class="tab-link tablink" data-tab="tab-config" type="button">Configuration</button>
            <button class="tab-link tablink" data-tab="tab-results" type="button">Results</button>
            <button class="tab-link tablink" data-tab="tab-scenarios" type="button">Saved scenarios &amp; exports</button>
            <button class="tab-link tablink" data-tab="tab-settings" type="button">Settings &amp; assumptions</button>
            <button class="tab-link tablink" data-tab="tab-copilot" type="button">AI briefing (Copilot / ChatGPT)</button>
        </div>

        <!-- INTRO TAB -->
        <section id="tab-intro" class="tab-panel tabcontent active" style="display:block;">
            <div class="card">
                <div class="card-header">
                    <div>
                        <div class="intro-highlight">
                            <span class="icon">üìä</span>
                            <span>FETP India programme planning sandbox</span>
                        </div>
                        <div class="card-title">What STEPS does</div>
                        <div class="card-subtitle">
                            Compare alternative programme configurations for Advanced and Intermediate FETP in India
                            on trainees, costs, epidemiological benefits and perceived programme value.
                        </div>
                    </div>
                </div>
                <div class="card-body">
                    <p class="small">
                        STEPS is a decision aid that combines:
                    </p>
                    <ul class="plain-list small">
                        <li>Programme configuration (tier, incentives, mentorship, delivery mode, cohorts, trainees).</li>
                        <li>Costing (direct versus economic costs, explicit mentor support costs, opportunity costs).</li>
                        <li>Epidemiological benefits over a configurable planning horizon.</li>
                        <li>
                            Perceived programme value from a discrete choice experiment (labelled here as
                            <strong>Perceived programme value</strong> rather than willingness to pay.
                        </li>
                        <li>Simple capacity and feasibility checks using mentor capacity and available mentors.</li>
                    </ul>
                    <p class="small">
                        Use the <strong>Configuration</strong> tab to define a scenario, then click
                        <strong>Apply configuration</strong> to refresh the <strong>Results</strong>.
                        Save scenarios on the <strong>Saved scenarios</strong> tab and export to Excel or PDF. Use the
                        <strong>AI briefing</strong> tab to generate policy-ready summaries via Copilot or ChatGPT.
                    </p>
                </div>
            </div>
        </section>

        <!-- CONFIGURATION TAB -->
        <section id="tab-config" class="tab-panel tabcontent" style="display:none;">
            <div class="grid-two">
                <!-- Left: Programme configuration -->
                <div class="card card-config">
                    <div class="card-header-with-info">
                        <div>
                            <div class="card-title">Programme configuration</div>
                            <div class="card-subtitle">
                                Select tier, incentives, mentorship, delivery mode, cohorts and trainees.
                            </div>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="form-grid-two">
                            <div class="form-row">
                                <label class="form-label" for="program-tier">
                                    FETP tier
                                </label>
                                <select id="program-tier">
                                    <option value="frontline">Frontline (3 months)</option>
                                    <option value="intermediate">Intermediate (12 months)</option>
                                    <option value="advanced">Advanced (24 months)</option>
                                </select>
                                <div class="input-help">
                                    Drives duration, costs and epidemiological parameters.
                                </div>
                            </div>

                            <div class="form-row">
                                <label class="form-label" for="career-track">
                                    Incentive / career pathway
                                </label>
                                <select id="career-track">
                                    <option value="certificate">Certificate only</option>
                                    <option value="uniqual">University qualification</option>
                                    <option value="career_path">Government career pathway</option>
                                </select>
                            </div>

                            <div class="form-row">
                                <label class="form-label" for="mentorship">
                                    Mentorship intensity
                                </label>
                                <select id="mentorship">
                                    <option value="low">Low</option>
                                    <option value="medium">Medium</option>
                                    <option value="high">High</option>
                                </select>
                                <div class="input-help">
                                    Affects perceived programme value, mentor costs, and mentor capacity requirements.
                                </div>
                            </div>

                            <div class="form-row">
                                <label class="form-label" for="delivery">
                                    Delivery mode
                                </label>
                                <select id="delivery">
                                    <option value="inperson">Fully in person</option>
                                    <option value="blended">Blended</option>
                                    <option value="online">Fully online</option>
                                </select>
                            </div>

                            <div class="form-row">
                                <label class="form-label" for="response">
                                    Expected outbreak response time (days)
                                </label>
                                <select id="response">
                                    <option value="30">Within 30 days</option>
                                    <option value="15">Within 15 days</option>
                                    <option value="7" selected>Within 7 days</option>
                                </select>
                                <div class="input-help">
                                    Shorter response times increase epidemiological benefits via a response-time multiplier.
                                </div>
                            </div>

                            <div class="form-row">
                                <label class="form-label" for="cohorts">
                                    Number of cohorts
                                </label>
                                <input id="cohorts" type="number" min="1" value="1" />
                            </div>

                            <div class="form-row">
                                <label class="form-label" for="trainees">
                                    Trainees per cohort
                                </label>
                                <input id="trainees" type="number" min="1" value="20" />
                                <div id="scale-warning" class="input-help"></div>
                            </div>

                            <div class="form-row">
                                <label class="form-label" for="scenario-name">
                                    Scenario name
                                </label>
                                <input id="scenario-name" type="text" placeholder="e.g. Intermediate, high mentorship, 4 cohorts" />
                            </div>

                            <div class="form-row">
                                <label class="form-label" for="scenario-notes">
                                    Notes (optional)
                                </label>
                                <textarea id="scenario-notes" rows="2" placeholder="Short note on rationale, assumptions or context"></textarea>
                            </div>
                        </div>

                        <div class="config-metrics-row">
                            <div class="config-metric-pill">
                                <div class="config-metric-label">Total trainees</div>
                                <div class="config-metric-value">
                                    <span id="total-trainees-label">‚Äì</span>
                                </div>
                            </div>
                            <div class="config-metric-pill">
                                <div class="config-metric-label">Programme type</div>
                                <div class="config-metric-value">
                                    <span id="config-program-type-label">‚Äì</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Right: Costing inputs & opportunity cost -->
                <div class="card">
                    <div class="card-header-with-info">
                        <div>
                            <div class="card-title">Cost parameters</div>
                            <div class="card-subtitle">
                                Enter programme cost per trainee per month and mentor support cost per cohort.
                            </div>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="form-row cost-slider-row">
                            <div class="cost-slider-header">
                                <span class="cost-slider-label">
                                    Cost per trainee per month (INR)
                                </span>
                                <span class="cost-slider-value-pill">
                                    <span id="cost-slider-display">‚Çπ50,000</span>
                                </span>
                            </div>
                            <input id="cost-slider" type="range" min="5000" max="200000" step="1000" value="50000" />
                            <div id="cost-warning" class="input-help"></div>
                        </div>

                        <div class="summary-grid" style="margin-top:10px;">
                            <div class="summary-card">
                                <div class="summary-label">
                                    Mentor support cost per cohort (base, before mentorship multiplier)
                                </div>
                                <div>
                                    <input id="mentor-cost-per-cohort" type="number" min="0" value="500000" />
                                </div>
                                <div class="input-help">
                                    Multiplied by mentorship intensity:
                                    Low = 1.0, Medium = 1.3, High = 1.7.
                                </div>
                            </div>

                            <div class="summary-card">
                                <div class="summary-label">
                                    Cross-sector benefit multiplier (One Health)
                                </div>
                                <div>
                                    <input id="cross-sector-multiplier" type="number" step="0.1" min="0.8" max="2.0" value="1.0" />
                                </div>
                                <div class="input-help">
                                    Applies only to epidemiological benefits (not perceived programme value).
                                </div>
                            </div>
                        </div>

                        <div style="margin-top:10px;">
                            <label class="form-label">Opportunity cost</label>
                            <div class="form-inline">
                                <div id="opp-toggle" class="toggle" role="switch" aria-checked="false" tabindex="0">
                                    <div class="toggle-track">
                                        <div class="toggle-thumb"></div>
                                    </div>
                                    <div class="toggle-label">
                                        Include opportunity cost in economic costs
                                    </div>
                                </div>
                            </div>
                            <div class="input-help">
                                When ON, economic costs include an opportunity cost factor based on tier.
                                Direct cost always excludes opportunity cost.
                            </div>
                        </div>

                        <div class="card-subtitle" style="margin-top:12px;">
                            Capacity assumptions (for feasibility checks)
                        </div>
                        <div class="form-grid-two" style="margin-top:4px;">
                            <div class="form-row">
                                <label class="form-label" for="available-mentors">
                                    Available mentors nationally
                                </label>
                                <input id="available-mentors" type="number" min="0" value="200" />
                            </div>
                            <div class="form-row">
                                <label class="form-label" for="available-sites">
                                    Available training sites / hubs (optional)
                                </label>
                                <input id="available-sites" type="number" min="0" placeholder="e.g. 10" />
                            </div>
                            <div class="form-row">
                                <label class="form-label" for="max-cohorts-per-site">
                                    Max cohorts per site per year (optional)
                                </label>
                                <input id="max-cohorts-per-site" type="number" min="0" placeholder="e.g. 2" />
                            </div>
                        </div>

                        <div style="margin-top:14px; display:flex; gap:8px; flex-wrap:wrap;">
                            <button type="button" id="update-results" class="btn btn-primary">
                                <span class="btn-icon-left">‚öôÔ∏è</span>
                                Apply configuration
                            </button>
                            <button type="button" id="save-scenario" class="btn btn-ghost">
                                üíæ Save scenario
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- RESULTS TAB -->
        <section id="tab-results" class="tab-panel tabcontent" style="display:none;">
            <div class="grid-two">
                <!-- Left: Headline results -->
                <div class="card">
                    <div class="card-header-with-info">
                        <div>
                            <div class="card-title">Headline results</div>
                            <div class="card-subtitle">
                                Stakeholder endorsement, perceived programme value and cost‚Äìbenefit profile.
                            </div>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="metrics-row">
                            <div class="metric-card">
                                <div class="metric-label-row">
                                    <div class="metric-label-main">
                                        Stakeholder endorsement
                                    </div>
                                </div>
                                <div class="metric-value-big" id="endorse-rate">‚Äì</div>
                                <div class="endorsement-subtext">
                                    Percentage of stakeholders supporting this programme configuration.
                                </div>
                            </div>

                            <div class="metric-card">
                                <div class="metric-label-row">
                                    <div class="metric-label-main">
                                        Perceived programme value
                                    </div>
                                </div>
                                <div class="metric-value-big">
                                    <span id="wtp-per-trainee">‚Äì</span>
                                </div>
                                <div class="endorsement-subtext">
                                    Implicit valuation per trainee per month from preference study (not a fee).
                                </div>
                            </div>

                            <div class="metric-card">
                                <div class="metric-label-row">
                                    <div class="metric-label-main">
                                        Net benefit (all cohorts)
                                    </div>
                                </div>
                                <div class="metric-value-big" id="net-benefit">‚Äì</div>
                                <div class="endorsement-subtext">
                                    Epidemiological benefits minus economic costs for all cohorts.
                                </div>
                            </div>
                        </div>

                        <div class="summary-grid" style="margin-top:12px;">
                            <div class="summary-card">
                                <div class="summary-label">Total perceived programme value (all cohorts)</div>
                                <div class="summary-value" id="wtp-total-cohort">‚Äì</div>
                            </div>
                            <div class="summary-card">
                                <div class="summary-label">Direct cost (all cohorts)</div>
                                <div class="summary-value" id="prog-cost-per-cohort">‚Äì</div>
                            </div>
                            <div class="summary-card">
                                <div class="summary-label">Economic cost (all cohorts)</div>
                                <div class="summary-value" id="total-cost">‚Äì</div>
                                <div class="input-help">
                                    Includes opportunity cost when toggle is ON.
                                </div>
                            </div>
                            <div class="summary-card">
                                <div class="summary-label">Benefit‚Äìcost ratio</div>
                                <div class="summary-value" id="bcr">‚Äì</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Right: Capacity & feasibility -->
                <div class="card">
                    <div class="card-header-with-info">
                        <div>
                            <div class="card-title">Capacity and feasibility checks</div>
                            <div class="card-subtitle">
                                Mentor requirements versus available mentors and training site capacity.
                            </div>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="metric-badge metric-neutral">
                            <div class="metric-badge-label">Feasibility status</div>
                            <div class="metric-badge-value" id="capacity-status">
                                ‚Äì
                            </div>
                            <div class="metric-badge-subtext">
                                Based on mentors per cohort, total required mentors and available mentors.
                            </div>
                        </div>

                        <div class="capacity-metrics-grid">
                            <div class="capacity-metric-card">
                                <div class="capacity-metric-label">Required mentors per cohort</div>
                                <div class="capacity-metric-value" id="capacity-mentors-per-cohort">‚Äì</div>
                            </div>
                            <div class="capacity-metric-card">
                                <div class="capacity-metric-label">Required mentors nationally</div>
                                <div class="capacity-metric-value" id="capacity-mentors-total">‚Äì</div>
                            </div>
                            <div class="capacity-metric-card">
                                <div class="capacity-metric-label">Available mentors nationally</div>
                                <div class="capacity-metric-value" id="capacity-mentors-available">‚Äì</div>
                            </div>
                        </div>

                        <div class="capacity-gap-note" id="capacity-detail" style="margin-top:8px;"></div>
                    </div>
                </div>
            </div>

            <!-- Epidemiology and costing visuals -->
            <div class="grid-two" style="margin-top:14px;">
                <div class="card">
                    <div class="card-header-with-info">
                        <div>
                            <div class="card-title">Epidemiological outputs</div>
                            <div class="card-subtitle">
                                Graduates, outbreak responses and epidemiological benefits (with cross-sector multiplier).
                            </div>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="summary-grid">
                            <div class="summary-card">
                                <div class="summary-label">Outbreak responses per year (national)</div>
                                <div class="summary-value" id="nat-outbreaks">‚Äì</div>
                            </div>
                            <div class="summary-card">
                                <div class="summary-label">Epidemiological benefits (all cohorts, INR)</div>
                                <div class="summary-value" id="nat-total-benefit">‚Äì</div>
                            </div>
                            <div class="summary-card">
                                <div class="summary-label">Economic cost (all cohorts, INR)</div>
                                <div class="summary-value" id="nat-total-cost">‚Äì</div>
                            </div>
                        </div>

                        <div style="margin-top:10px;">
                            <canvas id="chart-epi" height="140"></canvas>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header-with-info">
                        <div>
                            <div class="card-title">Support profile &amp; value summary</div>
                            <div class="card-subtitle">
                                Stakeholder support versus opt-out and implied value from preference study.
                            </div>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="summary-grid">
                            <div class="summary-card">
                                <div class="summary-label">Opt-out rate</div>
                                <div class="summary-value" id="optout-rate">‚Äì</div>
                            </div>
                            <div class="summary-card">
                                <div class="summary-label">
                                    Total perceived programme value (INR, all cohorts)
                                </div>
                                <div class="summary-value" id="nat-total-wtp">‚Äì</div>
                            </div>
                        </div>

                        <div style="margin-top:10px;">
                            <canvas id="chart-uptake" height="140"></canvas>
                        </div>

                        <div style="margin-top:10px;">
                            <canvas id="chart-bcr" height="120"></canvas>
                        </div>

                        <div class="assumptions-panel" style="margin-top:10px;">
                            <div class="assumptions-panel-title">Interpretation of ‚ÄúPerceived programme value‚Äù</div>
                            <div class="small">
                                This metric is an <strong>implicit valuation</strong> derived from a discrete choice experiment
                                with stakeholders. It is not a fee or budget requirement, but a way of expressing how much
                                respondents valued this configuration relative to its cost attribute.
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- SAVED SCENARIOS TAB -->
        <section id="tab-scenarios" class="tab-panel tabcontent" style="display:none;">
            <div class="card">
                <div class="card-header-with-info">
                    <div>
                        <div class="card-title">Saved scenarios</div>
                        <div class="card-subtitle">
                            Save multiple configurations, compare them and export to Excel or PDF for discussion.
                        </div>
                    </div>
                    <div class="card-header-actions">
                        <button type="button" id="export-excel" class="btn btn-secondary btn-small">
                            ‚¨áÔ∏è Export to Excel
                        </button>
                        <button type="button" id="export-pdf" class="btn btn-primary-small btn-small">
                            üìù Standard PDF
                        </button>
                        <button type="button" id="export-pdf-brief" class="btn btn-ghost-small btn-small">
                            üìÑ Brief (2 pages)
                        </button>
                    </div>
                </div>
                <div class="card-body">
                    <div class="table-wrapper">
                        <table id="scenario-table" class="data-table table-small-text">
                            <thead>
                            <tr>
                                <th>Select</th>
                                <th>Name</th>
                                <th>Tags</th>
                                <th>Tier</th>
                                <th>Career track</th>
                                <th>Mentorship</th>
                                <th>Delivery</th>
                                <th>Response</th>
                                <th class="numeric">Cohorts</th>
                                <th class="numeric">Trainees / cohort</th>
                                <th class="numeric">Cost / trainee / month (INR)</th>
                                <th>Preference model</th>
                                <th class="numeric">Endorsement (%)</th>
                                <th class="numeric">Perceived value / trainee / month (INR)</th>
                                <th class="numeric">Perceived value (all cohorts, INR)</th>
                                <th class="numeric">BCR</th>
                                <th class="numeric">Direct cost (all cohorts, INR)</th>
                                <th class="numeric">Economic cost (all cohorts, INR)</th>
                                <th class="numeric">Epi benefits (all cohorts, INR)</th>
                                <th class="numeric">Net benefit (INR)</th>
                                <th class="numeric">Outbreak responses / year (national)</th>
                                <th class="numeric">Mentor cost / cohort (INR)</th>
                                <th class="numeric">Mentor cost (all cohorts, INR)</th>
                                <th>Notes</th>
                            </tr>
                            </thead>
                            <tbody>
                            <!-- populated by script.js -->
                            </tbody>
                        </table>
                    </div>

                    <div class="brief-notes-grid" style="margin-top:10px;">
                        <div>
                            <label class="form-label" for="enablers-text">
                                Implementation enablers (for brief PDF)
                            </label>
                            <textarea id="enablers-text" placeholder="E.g. existing FETP institutions, NCDC leadership, partner support"></textarea>
                        </div>
                        <div>
                            <label class="form-label" for="risks-text">
                                Implementation risks (for brief PDF)
                            </label>
                            <textarea id="risks-text" placeholder="E.g. mentor shortages, faculty capacity, financing and absorption constraints"></textarea>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- SETTINGS & ASSUMPTIONS TAB -->
        <section id="tab-settings" class="tab-panel tabcontent" style="display:none;">
            <div class="settings-grid">
                <div class="card">
                    <div class="card-header-with-info">
                        <div>
                            <div class="card-title">Epidemiological assumptions</div>
                            <div class="card-subtitle">
                                Planning horizon and key epidemiological assumptions used for benefit calculations.
                            </div>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="form-grid-two">
                            <div class="form-row">
                                <label class="form-label" for="planning-horizon-config">
                                    Planning horizon (years)
                                </label>
                                <input id="planning-horizon-config" type="number" min="1" value="5" />
                                <div class="input-help">
                                    Applied to benefits via a standard present-value factor with the chosen discount rate.
                                </div>
                            </div>
                        </div>
                        <div class="help-box">
                            <strong>Key epidemiological assumptions (internal defaults)</strong><br />
                            Completion rates and outbreak responses per graduate per year are tier-specific and can be
                            configured in the underlying model if needed. By default, each graduate is assumed to
                            contribute to a small number of outbreak responses per year, valued at a fixed amount.
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header-with-info">
                        <div>
                            <div class="card-title">Assumptions summary box</div>
                            <div class="card-subtitle">
                                These assumptions are printed into PDF/Excel exports to make scenarios stand alone in meetings.
                            </div>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="assumptions-panel">
                            <div class="assumptions-panel-title">Assumptions used (printed in exports)</div>
                            <ul class="assumptions-list">
                                <li>Planning horizon (years) from the input above.</li>
                                <li>Discount rate for epidemiological benefits (internal default).</li>
                                <li>Completion rate and outbreak responses per graduate per year (tier-specific).</li>
                                <li>Value per outbreak in INR and any non-outbreak value per graduate per year.</li>
                                <li>Whether opportunity cost is included in economic costs (based on toggle).</li>
                                <li>Mentor cost base per cohort and mentorship multiplier applied.</li>
                                <li>Cross-sector benefit multiplier (One Health / cross-sector effects).</li>
                                <li>Capacity inputs: available mentors nationally and optional site capacity inputs.</li>
                            </ul>
                            <div class="small">
                                The same set of assumptions is exported to the <strong>Assumptions</strong> sheet in
                                Excel and to the <strong>Assumptions used</strong> box in PDF outputs.
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- COPILOT / CHATGPT TAB -->
        <section id="tab-copilot" class="tab-panel tabcontent" style="display:none;">
            <div class="copilot-layout">
                <!-- Left: Instructions and actions -->
                <div class="card">
                    <div class="card-header-with-info">
                        <div>
                            <div class="card-title">AI briefing helper</div>
                            <div class="card-subtitle">
                                Generate structured policy briefs or slides using Copilot or ChatGPT based on the current scenario.
                            </div>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="copilot-instructions">
                            <p class="small">
                                This helper prepares prompts that bundle scenario results, epidemiological outputs and assumptions
                                into a single text block. You can paste the prompts directly into:
                            </p>
                            <ul>
                                <li><strong>Microsoft Copilot</strong> to generate a Word memo or PowerPoint slides.</li>
                                <li><strong>ChatGPT</strong> to generate a 2-page policy brief or slide-ready summary.</li>
                            </ul>
                            <p class="small">
                                The prompts ask the AI assistant to keep language policy-ready, avoid heavy technical jargon,
                                and include a compact table summarising the leading scenarios and benefit‚Äìcost metrics.
                            </p>
                        </div>

                        <div class="copilot-actions">
                            <span id="copilot-status-pill" class="copilot-status-pill">Not yet generated</span>
                            <span id="copilot-status-text" class="small">
                                Apply a configuration or save a scenario, then generate prompts.
                            </span>
                        </div>

                        <div style="margin-top:10px; display:flex; flex-wrap:wrap; gap:8px;">
                            <button type="button" id="copilot-open-and-copy-btn" class="btn btn-primary btn-small">
                                üîÅ Copy for Copilot &amp; open
                            </button>
                            <button type="button" id="copilot-copy-btn" class="btn btn-ghost btn-small">
                                üìã Copy Copilot prompt
                            </button>
                            <button type="button" id="chatgpt-copy-btn" class="btn btn-ghost btn-small">
                                üìã Copy ChatGPT prompt
                            </button>
                            <button type="button" id="download-prompts-txt" class="btn btn-ghost btn-small">
                                ‚¨áÔ∏è Download prompts (.txt)
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Right: Prompt panels -->
                <div class="card">
                    <div class="card-header-with-info">
                        <div>
                            <div class="card-title">Prompt content</div>
                            <div class="card-subtitle">
                                Prompts automatically include the current scenario values, assumptions and feasibility outputs.
                            </div>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="form-row">
                            <label class="form-label" for="copilot-prompt-output">
                                Copilot prompt
                            </label>
                            <textarea id="copilot-prompt-output" rows="8" class="copilot-prompt-body" style="width:100%;"></textarea>
                        </div>
                        <div class="form-row" style="margin-top:8px;">
                            <label class="form-label" for="chatgpt-prompt-output">
                                ChatGPT prompt
                            </label>
                            <textarea id="chatgpt-prompt-output" rows="8" class="copilot-prompt-body" style="width:100%;"></textarea>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>
</div>

<!-- Libraries: keep existing CDN usage for offline-friendliness -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>

<!-- Main app script -->
<script src="script.js"></script>

<!-- Minimal inline helpers to keep UI in sync with script.js -->
<script>
// Opportunity cost toggle (adds/removes .on and aria-checked)
(function () {
    const toggle = document.getElementById("opp-toggle");
    if (!toggle) return;
    function flip() {
        const isOn = toggle.classList.toggle("on");
        toggle.setAttribute("aria-checked", isOn ? "true" : "false");
    }
    toggle.addEventListener("click", flip);
    toggle.addEventListener("keydown", function (e) {
        if (e.key === " " || e.key === "Enter") {
            e.preventDefault();
            flip();
        }
    });
})();

// Cost slider label
(function () {
    const slider = document.getElementById("cost-slider");
    const display = document.getElementById("cost-slider-display");
    function update() {
        if (!slider || !display) return;
        const v = Number(slider.value || 0);
        display.textContent = "‚Çπ" + v.toLocaleString("en-IN", {
            minimumFractionDigits: 0,
            maximumFractionDigits: 0
        });
    }
    if (slider) {
        slider.addEventListener("input", update);
        update();
    }
})();

// Quick derived labels for total trainees and programme type
(function () {
    const cohortsEl = document.getElementById("cohorts");
    const traineesEl = document.getElementById("trainees");
    const tierEl = document.getElementById("program-tier");
    const mentorshipEl = document.getElementById("mentorship");
    const labelTotal = document.getElementById("total-trainees-label");
    const labelProgramType = document.getElementById("config-program-type-label");

    function updateTotals() {
        if (!cohortsEl || !traineesEl || !labelTotal) return;
        const c = Number(cohortsEl.value || 0);
        const t = Number(traineesEl.value || 0);
        const total = c * t;
        labelTotal.textContent = total > 0 ? total.toLocaleString("en-IN") : "‚Äì";
    }
    function updateProgramType() {
        if (!tierEl || !mentorshipEl || !labelProgramType) return;
        const tierText = tierEl.options[tierEl.selectedIndex].textContent;
        const mentorText = mentorshipEl.options[mentorshipEl.selectedIndex].textContent;
        labelProgramType.textContent = tierText + ", " + mentorText + " mentorship";
    }

    if (cohortsEl) cohortsEl.addEventListener("input", updateTotals);
    if (traineesEl) traineesEl.addEventListener("input", updateTotals);
    if (tierEl) tierEl.addEventListener("change", updateProgramType);
    if (mentorshipEl) mentorshipEl.addEventListener("change", updateProgramType);

    updateTotals();
    updateProgramType();
})();
</script>
</body>
</html>
