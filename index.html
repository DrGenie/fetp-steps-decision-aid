<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>STEPS – FETP Scale-Up Decision Aid (India)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Google Font -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet" />

  <!-- Styles -->
  <link rel="stylesheet" href="styles.css" />

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <!-- jsPDF -->
  <script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>
  <!-- SheetJS for Excel export -->
  <script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>
</head>
<body>
  <div class="app-shell">
    <header class="app-header">
      <div>
        <h1>STEPS: Scalable Training Estimation and Planning System</h1>
        <p>
          Decision aid for planning the scale up of Field Epidemiology Training Programs (FETPs) in India, combining
          stakeholder preferences, costing data and simple epidemiological scenarios.
        </p>
      </div>
      <div class="header-badge">
        <span>FETP India</span>
        <small>Prototype → Policy-ready version</small>
      </div>
    </header>

    <nav class="tab-bar">
      <button class="tab-button active" data-tab="introTab">Overview</button>
      <button class="tab-button" data-tab="configTab">Configuration</button>
      <button class="tab-button" data-tab="resultsTab">Results</button>
      <button class="tab-button" data-tab="sensitivityTab">Sensitivity</button>
      <button class="tab-button" data-tab="simulationTab">National Simulation</button>
      <button class="tab-button" data-tab="dashboardTab">Scenario Dashboard</button>
      <button class="tab-button" data-tab="costTab">Costs</button>
      <button class="tab-button" data-tab="aboutTab">About & Methods</button>
    </nav>

    <main class="main-content">

      <!-- OVERVIEW TAB -->
      <section id="introTab" class="tab-panel active">
        <div class="panel-grid">
          <div class="card">
            <h2>What STEPS does</h2>
            <p>
              STEPS helps decision makers explore different configurations of FETP scale-up in India.
              It combines:
            </p>
            <ul>
              <li>Stakeholder preferences from the FETP India DCE (mixed logit and latent class models)</li>
              <li>Cost templates for frontline, intermediate and advanced tiers</li>
              <li>Simple epidemiological assumptions on how more trained field epidemiologists improve outbreak response</li>
            </ul>
            <p>
              For each configuration, STEPS reports expected endorsement (uptake), cost, benefit–cost ratios and
              simple epidemiological summaries, and allows comparison across saved scenarios.
            </p>
          </div>

          <div class="card">
            <h2>How to use STEPS</h2>
            <ol>
              <li>Go to the <strong>Configuration</strong> tab and choose programme tier, mentorship, incentives and response time.</li>
              <li>Set the cost per trainee per month within the range used in the DCE (INR 75,000 to 400,000).</li>
              <li>Choose the preference model (average mixed logit or “training supporters” latent class).</li>
              <li>Review headline results, benefit–cost ratios and epidemiological indicators on the <strong>Results</strong> tab.</li>
              <li>Save scenarios, compare them on the <strong>Scenario Dashboard</strong>, and export summary tables.</li>
            </ol>
          </div>

          <div class="card">
            <h2>Key outputs</h2>
            <ul>
              <li>Predicted probability that stakeholders endorse the selected FETP configuration</li>
              <li>Per trainee and per cohort benefits based on DCE-derived willingness to pay</li>
              <li>Direct and opportunity costs per cohort, and benefit–cost ratios</li>
              <li>Approximate epidemiological benefits (additional trained epidemiologists and outbreaks averted)</li>
              <li>Downloadable policy brief and technical appendix in PDF, and Excel summary tables</li>
            </ul>
          </div>
        </div>
      </section>

      <!-- CONFIG TAB -->
      <section id="configTab" class="tab-panel">
        <div class="panel-grid config-grid">
          <div class="card">
            <h2>Configuration</h2>

            <div class="field-group">
              <label>Currency display</label>
              <div class="chip-row">
                <label class="chip">
                  <input type="radio" name="currencyDisplay" value="INR" checked />
                  <span>INR</span>
                </label>
                <label class="chip">
                  <input type="radio" name="currencyDisplay" value="USD" />
                  <span>USD (approximate)</span>
                </label>
              </div>
              <p class="hint">
                All calculations are carried out in Indian Rupees; USD amounts use an approximate recent exchange rate.
              </p>
            </div>

            <div class="field-group">
              <label for="prefModel">Preference model</label>
              <select id="prefModel">
                <option value="mxl">Average mixed logit (all stakeholders)</option>
                <option value="lc2">Training supporters (latent class)</option>
              </select>
              <p class="hint">
                Use the mixed logit model for average preferences, or the latent class model to focus on the “supportive”
                group identified in the DCE.
              </p>
            </div>

            <div class="field-group">
              <label for="programType">Programme tier</label>
              <select id="programType">
                <option value="frontline">Frontline (3 months)</option>
                <option value="intermediate">Intermediate (15 months)</option>
                <option value="advanced">Advanced (24 months)</option>
              </select>
            </div>

            <div class="field-group">
              <label for="mentorship">Mentorship intensity</label>
              <select id="mentorship">
                <option value="low">Low mentorship (reference)</option>
                <option value="medium">Medium mentorship</option>
                <option value="high">High mentorship</option>
              </select>
            </div>

            <div class="field-group">
              <label for="careerIncentive">Career incentives</label>
              <select id="careerIncentive">
                <option value="gov_partner">Government and partner certificate (reference)</option>
                <option value="university">University qualification</option>
                <option value="gov_pathway">Government career pathway</option>
              </select>
            </div>

            <div class="field-group">
              <label for="deliveryMode">Mode of delivery</label>
              <select id="deliveryMode">
                <option value="blended">Blended classroom and online (reference)</option>
                <option value="inperson">Fully in-person</option>
                <option value="online">Fully online</option>
              </select>
            </div>

            <div class="field-group">
              <label for="responseTime">Outbreak response capacity</label>
              <select id="responseTime">
                <option value="30">Investigate within 30 days (reference)</option>
                <option value="15">Investigate within 15 days</option>
                <option value="7">Investigate within 7 days</option>
              </select>
            </div>

            <div class="field-group">
              <label for="costPerTrainee">Cost per trainee per month (<span id="costCurrencyLabel">INR</span>)</label>
              <input type="range" id="costPerTrainee" min="75000" max="400000" step="5000" />
              <div class="flex-between">
                <span class="hint">Within the DCE range (75,000 to 400,000 INR per trainee per month).</span>
                <strong id="costPerTraineeDisplay"></strong>
              </div>
              <button type="button" class="btn-secondary" id="btnUseCostTemplate">
                Use costing study baseline for this tier
              </button>
            </div>

            <div class="field-inline">
              <div class="field-group">
                <label for="cohortSize">Trainees per cohort</label>
                <input type="number" id="cohortSize" min="5" max="200" value="60" />
              </div>
              <div class="field-group">
                <label for="numCohorts">Number of cohorts (national plan)</label>
                <input type="number" id="numCohorts" min="1" max="200" value="50" />
              </div>
            </div>

            <div class="field-group">
              <label class="toggle">
                <input type="checkbox" id="includeOppCost" checked />
                <span class="toggle-slider"></span>
                <span class="toggle-label">Include trainee opportunity cost in economic cost</span>
              </label>
              <p class="hint">
                Opportunity cost is based on the ratio of trainee salary to direct programme costs in the costing
                templates. It affects the “economic” benefit–cost ratio but not the financial cost to the ministry.
              </p>
            </div>

            <div class="field-group">
              <label for="scenarioNotes">Scenario notes (for saving and reports)</label>
              <textarea id="scenarioNotes" rows="3" placeholder="Short description, assumptions, links to programme documents..."></textarea>
            </div>

            <div class="action-row">
              <button type="button" class="btn-primary" id="btnApplyConfig">
                Apply configuration and view results
              </button>
              <button type="button" class="btn-outline" id="btnSaveScenario">
                Save scenario
              </button>
            </div>
          </div>

          <div class="card">
            <h2>Current configuration summary</h2>
            <div id="configSummary">
              <!-- Filled by script.js -->
            </div>
            <hr />
            <h3>Quick tips</h3>
            <ul>
              <li>Focus on advanced tier when resources are limited but strategic leadership capacity is needed.</li>
              <li>Higher mentorship and faster outbreak response times are generally valued by stakeholders.</li>
              <li>Use the latent class “supporters” model to see what a supportive stakeholder group would prioritise.</li>
            </ul>
          </div>
        </div>
      </section>

      <!-- RESULTS TAB -->
      <section id="resultsTab" class="tab-panel">
        <div class="panel-grid">
          <div class="card">
            <h2>Headline recommendation</h2>
            <p id="headlineRecommendation"></p>
            <div class="metrics-grid">
              <div class="metric">
                <span class="metric-label">Endorsement probability</span>
                <span class="metric-value" id="metricUptake"></span>
              </div>
              <div class="metric">
                <span class="metric-label">Benefit–cost ratio (financial)</span>
                <span class="metric-value" id="metricBCRFinancial"></span>
              </div>
              <div class="metric">
                <span class="metric-label">Benefit–cost ratio (economic)</span>
                <span class="metric-value" id="metricBCREconomic"></span>
              </div>
              <div class="metric">
                <span class="metric-label">Net benefit per cohort</span>
                <span class="metric-value" id="metricNetBenefit"></span>
              </div>
            </div>
          </div>

          <div class="card">
            <h2>Financial results (per cohort)</h2>
            <p id="resultsFinancialText"></p>
            <canvas id="chartCostBenefit"></canvas>
          </div>

          <div class="card">
            <h2>Epidemiological summary</h2>
            <p id="epiSummaryText"></p>
            <canvas id="chartEpi"></canvas>
          </div>

          <div class="card">
            <h2>Downloads</h2>
            <p>
              Use these exports for briefing notes, presentations and annexes.
            </p>
            <div class="action-row">
              <button type="button" class="btn-primary" id="btnDownloadPolicyPDF">
                Download policy brief (PDF)
              </button>
              <button type="button" class="btn-outline" id="btnDownloadTechnicalPDF">
                Download technical appendix (PDF)
              </button>
              <button type="button" class="btn-outline" id="btnDownloadExcel">
                Download scenarios (Excel)
              </button>
            </div>
            <p class="hint">
              The policy brief is written in accessible language for decision makers. The technical appendix provides
              detailed modelling methods with references.
            </p>
          </div>
        </div>
      </section>

      <!-- SENSITIVITY TAB -->
      <section id="sensitivityTab" class="tab-panel">
        <div class="card">
          <h2>Cost sensitivity at fixed configuration</h2>
          <p>
            This chart varies the cost per trainee per month while keeping all other attributes fixed at the current
            configuration, and shows how benefit–cost ratios change.
          </p>
          <canvas id="chartSensitivity"></canvas>
        </div>
      </section>

      <!-- NATIONAL SIMULATION TAB -->
      <section id="simulationTab" class="tab-panel">
        <div class="panel-grid">
          <div class="card">
            <h2>National scale-up plan</h2>
            <p id="nationalSummaryText"></p>
          </div>
          <div class="card">
            <h2>Costs and benefits (national)</h2>
            <canvas id="chartNational"></canvas>
          </div>
        </div>
      </section>

      <!-- SCENARIO DASHBOARD TAB -->
      <section id="dashboardTab" class="tab-panel">
        <div class="card">
          <h2>Saved scenarios</h2>
          <p>
            Compare configurations across tiers, mentorship levels and costs. Scenarios saved from the Configuration
            tab appear here.
          </p>
          <div id="savedScenariosContainer"></div>
          <div class="action-row">
            <button type="button" class="btn-outline" id="btnClearScenarios">
              Clear all saved scenarios
            </button>
          </div>
          <canvas id="chartScenarioCompare"></canvas>
        </div>
      </section>

      <!-- COST TAB -->
      <section id="costTab" class="tab-panel">
        <div class="panel-grid">
          <div class="card">
            <h2>Cost templates and sources</h2>
            <p>
              The costing side of STEPS is based on templates derived from data provided by:
            </p>
            <ul>
              <li>World Health Organization (WHO) estimates for frontline and intermediate FETPs in India</li>
              <li>National Institute of Epidemiology (NIE)</li>
              <li>National Centre for Disease Control (NCDC)</li>
            </ul>
            <p>
              These sources cover direct costs (programme staff, travel, workshops, materials) and indirect costs
              (management, shared services, in-kind support and trainee opportunity costs). In STEPS, these data are
              used to:
            </p>
            <ul>
              <li>Set default cost ranges for frontline, intermediate and advanced tiers</li>
              <li>Approximate the share of opportunity cost relative to direct programme costs</li>
              <li>Provide reference values in the cost breakdown card</li>
            </ul>
          </div>

          <div class="card">
            <h2>Cost breakdown (current configuration)</h2>
            <div id="costBreakdownText"></div>
            <canvas id="chartCostBreakdown"></canvas>
          </div>
        </div>
      </section>

      <!-- ABOUT & METHODS TAB -->
      <section id="aboutTab" class="tab-panel">
        <div class="panel-grid">
          <div class="card">
            <h2>Plain-language overview</h2>
            <p>
              STEPS brings together three ingredients:
            </p>
            <ul>
              <li>
                A discrete choice experiment (DCE) with FETP stakeholders in India, estimating how they value changes in
                programme type, mentorship, incentives, delivery mode, outbreak response time and cost.
              </li>
              <li>
                Cost templates for frontline, intermediate and advanced programmes, compiled from WHO, NIE and NCDC
                data.
              </li>
              <li>
                Simple epidemiological assumptions on how additional trained field epidemiologists strengthen outbreak
                detection and response capacity.
              </li>
            </ul>
            <p>
              For a selected configuration, STEPS combines these to estimate endorsement probability, per trainee
              benefits, cohort-level costs and a benefit–cost ratio. It also reports approximate epidemiological
              indicators, such as additional trained epidemiologists and expected outbreaks averted.
            </p>
          </div>

          <div class="card">
            <h2>Attributes and levels</h2>
            <p>The key DCE attributes and reference levels are:</p>
            <ul>
              <li>Programme tier: frontline (reference), intermediate, advanced</li>
              <li>Mentorship intensity: low (reference), medium, high</li>
              <li>Career incentives: government and partner certificate (reference), university qualification, government career pathway</li>
              <li>Delivery mode: blended (reference), fully in-person, fully online</li>
              <li>Outbreak response capacity: investigate within 30 days (reference), 15 days, 7 days</li>
              <li>Cost per trainee per month: INR 75,000 to 400,000 (in thousands of rupees in the econometric models)</li>
            </ul>
            <p>
              These correspond directly to the design used in the FETP India DCE, and coefficients from mixed logit and
              latent class models are embedded in the tool.
            </p>
          </div>

          <div class="card">
            <h2>Methods note (for policy users)</h2>
            <p>
              The DCE analysis followed standard practice in health economics and transport economics, using mixed logit
              models to capture preference heterogeneity and latent class models to identify groups such as “training
              supporters”. The mixed logit model assumes that preferences vary continuously across stakeholders, while
              the latent class model assumes a small number of distinct preference types.
            </p>
            <p>
              Monetary benefits are derived from willingness-to-pay (WTP) estimates for changes in attributes, such as
              moving from frontline to advanced training or increasing mentorship intensity. These WTP values are then
              multiplied by the number of trainees and the programme duration to obtain cohort-level benefits, which are
              compared to direct programme costs to calculate benefit–cost ratios.
            </p>
            <p>
              Epidemiological indicators draw on evidence that Field Epidemiology Training Programs improve public
              health surveillance and outbreak response capacity at national and subnational levels. Studies have
              documented improvements in outbreak detection, investigation and response after FETPs were established,
              alongside strengthened surveillance systems and leadership capacity in ministries of health.:contentReference[oaicite:0]{index=0}
            </p>
            <p>
              A full technical description of the econometric models, cost templates and epidemiological assumptions is
              available in the downloadable technical appendix.
            </p>
          </div>

          <div class="card">
            <h2>Technical documents</h2>
            <p>
              For detailed methods, including equations, estimation strategies and references, download the technical
              appendix. For a short, non-technical summary for decision makers, use the policy brief.
            </p>
            <div class="action-row">
              <button type="button" class="btn-primary" id="btnDownloadPolicyPDF2">
                Policy brief (PDF)
              </button>
              <button type="button" class="btn-outline" id="btnDownloadTechnicalPDF2">
                Technical appendix (PDF)
              </button>
            </div>
            <p class="hint">
              Prepared by Mesfin Genie, PhD, Newcastle Business School, The University of Newcastle, Australia.
              Contact: <a href="mailto:mesfin.genie@newcastle.edu.au">mesfin.genie@newcastle.edu.au</a>.
            </p>
          </div>
        </div>
      </section>

    </main>
  </div>

  <!-- Modal for quick result view -->
  <div id="resultsModal" class="modal hidden">
    <div class="modal-content">
      <button class="modal-close" id="modalCloseBtn">&times;</button>
      <h2>Configuration results</h2>
      <p id="modalHeadline"></p>
      <div class="metrics-grid">
        <div class="metric">
          <span class="metric-label">Endorsement probability</span>
          <span class="metric-value" id="modalUptake"></span>
        </div>
        <div class="metric">
          <span class="metric-label">BCR (financial)</span>
          <span class="metric-value" id="modalBCRFinancial"></span>
        </div>
        <div class="metric">
          <span class="metric-label">BCR (economic)</span>
          <span class="metric-value" id="modalBCREconomic"></span>
        </div>
        <div class="metric">
          <span class="metric-label">Net benefit per cohort</span>
          <span class="metric-value" id="modalNetBenefit"></span>
        </div>
      </div>
    </div>
  </div>
  <div id="modalBackdrop" class="modal-backdrop hidden"></div>

  <script src="script.js"></script>
</body>
</html>
