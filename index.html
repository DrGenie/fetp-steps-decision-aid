<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>STEPS – FETP Scale Up Decision Aid (India)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="styles.css" />
  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <!-- jsPDF -->
  <script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>
  <!-- SheetJS for Excel export -->
  <script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>
</head>
<body>
  <header class="app-header">
    <div class="brand">
      <div class="brand-mark">S</div>
      <div>
        <h1>STEPS</h1>
        <p>Scalable Training Estimation and Planning System - FETP India</p>
      </div>
    </div>
    <div class="header-actions">
      <select id="currencyToggle" class="currency-toggle">
        <option value="INR">Currency: INR</option>
        <option value="USD">Currency: USD</option>
      </select>
      <select id="modelToggle" class="model-toggle">
        <option value="mxl">Preference model: Average mixed logit</option>
        <option value="lc2">Preference model: Training supporters (LC Class 2)</option>
      </select>
    </div>
  </header>

  <nav class="tabs">
    <button class="tab-button active" data-tab="tab-intro">Introduction</button>
    <button class="tab-button" data-tab="tab-config">Configuration</button>
    <button class="tab-button" data-tab="tab-results">Results</button>
    <button class="tab-button" data-tab="tab-cost">Cost templates</button>
    <button class="tab-button" data-tab="tab-scenarios">Saved scenarios</button>
    <button class="tab-button" data-tab="tab-about">About and methods</button>
  </nav>

  <main>
    <!-- Intro tab -->
    <section id="tab-intro" class="tab-panel active">
      <div class="panel-grid">
        <div class="card">
          <h2>What STEPS does</h2>
          <p>
            STEPS is an interactive planning tool that combines evidence from a discrete
            choice experiment with costing information to help design and scale Field
            Epidemiology Training Programmes (FETP) in India.
          </p>
          <p>
            You can configure the type of programme, mentorship, delivery mode, response
            time target, cost per trainee, cohort size, and number of cohorts. The tool
            then reports predicted stakeholder endorsement, programme costs, and a simple
            benefit–cost profile based on willingness to pay and optional epidemiological
            assumptions.
          </p>
          <p>
            Use the configuration tab to define a scenario, then move to the results tab
            to see summary charts and tables. You can save multiple scenarios and download
            policy briefs and data for inclusion in the business case.
          </p>
        </div>
        <div class="card">
          <h2>Quick start</h2>
          <ol class="intro-list">
            <li>Go to the Configuration tab.</li>
            <li>Select programme tier, mentorship, delivery mode and response time.</li>
            <li>Choose the cost per trainee per month within the DCE range.</li>
            <li>Set cohort size, duration, and number of cohorts.</li>
            <li>Review endorsement, costs, and benefit–cost ratios in the Results tab.</li>
            <li>Save scenarios and download a brief or Excel file for reporting.</li>
          </ol>
        </div>
      </div>
    </section>

    <!-- Configuration tab -->
    <section id="tab-config" class="tab-panel">
      <div class="panel-grid">
        <div class="card">
          <h2>Programme configuration</h2>

          <label class="field-label" for="programmeTier">Programme tier</label>
          <select id="programmeTier" class="field-input">
            <option value="frontline">Frontline (3 months)</option>
            <option value="intermediate">Intermediate (12 months)</option>
            <option value="advanced">Advanced (24 months)</option>
          </select>

          <label class="field-label" for="careerIncentive">Career incentive</label>
          <select id="careerIncentive" class="field-input">
            <option value="certificate">Government and partner certificate</option>
            <option value="university">University qualification</option>
            <option value="career_pathway">Government career pathway</option>
          </select>

          <label class="field-label" for="mentorshipLevel">
            Mentorship intensity
            <span class="info-tag" data-info="mentorship">i</span>
          </label>
          <select id="mentorshipLevel" class="field-input">
            <option value="low">Low (≥5 fellows per mentor)</option>
            <option value="medium">Medium (3–4 fellows per mentor)</option>
            <option value="high">High (≤2 fellows per mentor)</option>
          </select>

          <label class="field-label" for="deliveryMode">
            Delivery mode
            <span class="info-tag" data-info="delivery">i</span>
          </label>
          <select id="deliveryMode" class="field-input">
            <option value="blended">Blended (in person and online)</option>
            <option value="inperson">Fully in person</option>
            <option value="online">Fully online</option>
          </select>

          <label class="field-label" for="responseTime">
            Outbreak response capacity
            <span class="info-tag" data-info="response">i</span>
          </label>
          <select id="responseTime" class="field-input">
            <option value="30">Within 30 days</option>
            <option value="15">Within 15 days</option>
            <option value="7">Within 7 days</option>
          </select>

          <label class="field-label" for="costPerTrainee">
            Cost per trainee per month (INR)
            <span class="info-tag" data-info="cost">i</span>
          </label>
          <input
            id="costPerTrainee"
            type="range"
            min="75000"
            max="400000"
            step="5000"
            value="250000"
          />
          <div class="slider-values">
            <span>₹75,000</span>
            <span id="costPerTraineeDisplay">₹250,000</span>
            <span>₹400,000</span>
          </div>

          <label class="field-label" for="cohortSize">Trainees per cohort</label>
          <input id="cohortSize" class="field-input" type="number" min="5" value="20" />

          <label class="field-label" for="programmeDuration">
            Programme duration (months)
          </label>
          <input
            id="programmeDuration"
            class="field-input"
            type="number"
            min="1"
            value="3"
          />

          <label class="field-label" for="numCohorts">
            Number of cohorts (national scale up)
          </label>
          <input id="numCohorts" class="field-input" type="number" min="1" value="10" />

          <label class="field-label" for="scenarioNotes">
            Scenario notes (for reporting)
          </label>
          <textarea
            id="scenarioNotes"
            class="field-input"
            rows="3"
            placeholder="Short description or assumptions for this scenario."
          ></textarea>

          <div class="button-row">
            <button id="applyConfigBtn" class="primary-btn">Apply configuration</button>
          </div>
        </div>

        <div class="card">
          <h2>Key outputs (current configuration)</h2>
          <div class="summary-grid">
            <div class="summary-item">
              <h3>Predicted endorsement</h3>
              <p id="endorsementRate">–</p>
              <small>Share of stakeholders expected to support this programme.</small>
            </div>
            <div class="summary-item">
              <h3>Cost per cohort</h3>
              <p id="costPerCohort">–</p>
              <small>Financial cost for one cohort at the chosen design.</small>
            </div>
            <div class="summary-item">
              <h3>Benefit per cohort</h3>
              <p id="benefitPerCohort">–</p>
              <small>Willingness to pay based benefit, scaled by uptake.</small>
            </div>
            <div class="summary-item">
              <h3>Benefit–cost ratio</h3>
              <p id="bcrValue">–</p>
              <small>Above 1 suggests good value relative to cost.</small>
            </div>
          </div>
          <canvas id="bcrChart"></canvas>
        </div>
      </div>
    </section>

    <!-- Results tab -->
    <section id="tab-results" class="tab-panel">
      <div class="panel-grid">
        <div class="card">
          <h2>Programme performance</h2>
          <table class="results-table">
            <tbody>
              <tr>
                <th>Preference model</th>
                <td id="resultsModelName">–</td>
              </tr>
              <tr>
                <th>Programme tier</th>
                <td id="resultsTier">–</td>
              </tr>
              <tr>
                <th>Mentorship</th>
                <td id="resultsMentorship">–</td>
              </tr>
              <tr>
                <th>Delivery mode</th>
                <td id="resultsDelivery">–</td>
              </tr>
              <tr>
                <th>Response capacity</th>
                <td id="resultsResponse">–</td>
              </tr>
              <tr>
                <th>Cost per trainee per month</th>
                <td id="resultsCostPerTrainee">–</td>
              </tr>
              <tr>
                <th>Trainees per cohort</th>
                <td id="resultsCohortSize">–</td>
              </tr>
              <tr>
                <th>Programme duration</th>
                <td id="resultsDuration">–</td>
              </tr>
              <tr>
                <th>Number of cohorts</th>
                <td id="resultsNumCohorts">–</td>
              </tr>
            </tbody>
          </table>

          <h3>Economic outputs</h3>
          <table class="results-table">
            <tbody>
              <tr>
                <th>Predicted endorsement</th>
                <td id="resultsEndorsement">–</td>
              </tr>
              <tr>
                <th>Cost per cohort</th>
                <td id="resultsCostCohort">–</td>
              </tr>
              <tr>
                <th>Benefit per cohort</th>
                <td id="resultsBenefitCohort">–</td>
              </tr>
              <tr>
                <th>Benefit–cost ratio</th>
                <td id="resultsBcr">–</td>
              </tr>
              <tr>
                <th>Net benefit per cohort</th>
                <td id="resultsNbCohort">–</td>
              </tr>
              <tr>
                <th>Total cost (all cohorts)</th>
                <td id="resultsTotalCost">–</td>
              </tr>
              <tr>
                <th>Total benefit (all cohorts)</th>
                <td id="resultsTotalBenefit">–</td>
              </tr>
              <tr>
                <th>Total net benefit</th>
                <td id="resultsTotalNb">–</td>
              </tr>
            </tbody>
          </table>

          <div class="button-row">
            <button id="saveScenarioBtn" class="secondary-btn">Save scenario</button>
            <button id="downloadBriefBtn" class="secondary-btn">Download policy brief (PDF)</button>
            <button id="downloadExcelBtn" class="secondary-btn">Download data (Excel)</button>
          </div>
        </div>

        <div class="card">
          <h2>Visual summary</h2>
          <canvas id="costBenefitChart"></canvas>
          <canvas id="uptakeChart"></canvas>
        </div>
      </div>
    </section>

    <!-- Cost templates tab -->
    <section id="tab-cost" class="tab-panel">
      <div class="card">
        <h2>Cost templates and sources</h2>
        <p>
          This table summarises cost information assembled from WHO, NCDC, NIE and other
          partners. Values are in Indian rupees and represent total costs for recent
          programme cycles. They are used to check that the cost per trainee per month
          values in the DCE are realistic but are not imposed directly on your scenario.
        </p>
        <div class="cost-table-wrapper">
          <table class="results-table small">
            <thead>
              <tr>
                <th>Programme</th>
                <th>Source(s)</th>
                <th>Approximate total cost (INR)</th>
                <th>Key comments</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>Frontline FETP</td>
                <td>WHO</td>
                <td>₹104,482,758 (six cohorts)</td>
                <td>
                  Includes staff, workshops, travel, overheads, and opportunity cost for
                  six cohorts of frontline training.
                </td>
              </tr>
              <tr>
                <td>Intermediate FETP</td>
                <td>WHO, NIE, NCDC</td>
                <td>₹288,040,319 (combined)</td>
                <td>
                  Aggregated budget across institutions for recent intermediate
                  programmes. Represents full cycle costs rather than a single cohort.
                </td>
              </tr>
              <tr>
                <td>Advanced FETP</td>
                <td>NIE, NCDC</td>
                <td>₹295,536,700 (combined)</td>
                <td>
                  Includes substantial in country and international travel and trainee
                  stipends for a two year advanced programme cycle.
                </td>
              </tr>
            </tbody>
          </table>
        </div>
        <p class="small-note">
          Note: In STEPS, financial costs are calculated from the cost per trainee per
          month that you set in the Configuration tab, multiplied by cohort size and
          programme duration. The templates above provide reference points and a
          checklist of cost components, including staff, training materials, travel,
          overheads, and opportunity costs.
        </p>
      </div>
    </section>

    <!-- Saved scenarios tab -->
    <section id="tab-scenarios" class="tab-panel">
      <div class="card">
        <h2>Saved scenarios</h2>
        <p>
          Use this table to compare alternative configurations. You can save multiple
          scenarios, then export them to Excel or use them in the World Bank business
          case.
        </p>
        <table class="results-table" id="savedScenariosTable">
          <thead>
            <tr>
              <th>Name</th>
              <th>Tier</th>
              <th>Mentorship</th>
              <th>Delivery</th>
              <th>Response</th>
              <th>Cost / trainee / month</th>
              <th>Cohort size</th>
              <th>Endorsement</th>
              <th>BCR</th>
              <th>Scenario notes</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
    </section>

    <!-- About tab -->
    <section id="tab-about" class="tab-panel">
      <div class="panel-grid">
        <div class="card">
          <h2>About STEPS</h2>
          <p>
            STEPS is a decision support tool for planning the scale up of Field
            Epidemiology Training Programmes in India. It has been developed using a
            discrete choice experiment with 214 stakeholders, combined with detailed cost
            data and simple epidemiological assumptions.
          </p>
          <p>
            The tool reports how different combinations of programme tier, mentorship,
            delivery mode, response time and cost are likely to perform in terms of
            stakeholder endorsement, costs and benefit–cost ratios. It is intended to
            support the business case for scaling FETP, including the advanced tier.
          </p>
          <p>
            For technical users, the full econometric specification, WTP calculations and
            assumptions are described in the technical appendix.
          </p>
          <p>
            <a href="docs/STEPS_technical_appendix.pdf" target="_blank">
              Download technical appendix (PDF)
            </a>
          </p>
        </div>
        <div class="card">
          <h2>How to interpret results</h2>
          <p>
            The predicted endorsement percentage comes from either the average mixed
            logit model or the training supporters class in a latent class model. It
            represents the share of stakeholders who would be expected to endorse the
            chosen configuration rather than an opt out option.
          </p>
          <p>
            The benefit–cost ratio combines willingness to pay based benefits with the
            financial cost per cohort. Ratios above one indicate that, given the
            assumptions, stakeholders would on average be willing to pay at least as much
            as the programme costs. Ratios below one point to configurations that may
            need adjustment to deliver better value for money.
          </p>
          <p>
            Monetary values are shown in INR by default. If you switch to USD, the tool
            converts values using an exchange rate stored in the configuration file while
            keeping all internal calculations in INR.
          </p>
          <p>
            Scenario notes that you enter in the Configuration tab are stored with each
            saved scenario and appear in the downloaded Excel file and policy brief.
          </p>
        </div>
      </div>
    </section>
  </main>

  <footer class="app-footer">
    <p>
      STEPS – Mesfin Genie, PhD, Newcastle Business School, The University of Newcastle, Australia.
      Contact: <a href="mailto:mesfin.genie@newcastle.edu.au">mesfin.genie@newcastle.edu.au</a>
    </p>
  </footer>

  <script src="script.js"></script>
</body>
</html>
