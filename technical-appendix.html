<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>STEPS FETP India Decision Aid – Technical Appendix</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    :root {
      --color-bg: #F3F4F6;
      --color-surface: #FFFFFF;
      --color-border: #D1D5DB;
      --color-text: #111827;
      --color-text-muted: #4B5563;
      --color-accent: #1D4F91;
      --color-accent-soft: #E0ECFF;
      --color-table-header: #E5E7EB;
      --color-code-bg: #F9FAFB;

      --font-body: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
      --font-mono: SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
    }

    * {
      box-sizing: border-box;
    }

    html, body {
      margin: 0;
      padding: 0;
      background-color: var(--color-bg);
      color: var(--color-text);
      font-family: var(--font-body);
      line-height: 1.6;
    }

    body {
      padding: 32px 16px;
    }

    .page {
      max-width: 1100px;
      margin: 0 auto;
      background-color: var(--color-surface);
      border: 1px solid var(--color-border);
      border-radius: 8px;
      padding: 32px 32px 40px 32px;
      box-shadow: 0 10px 30px rgba(15, 23, 42, 0.08);
    }

    header {
      border-bottom: 1px solid var(--color-border);
      padding-bottom: 16px;
      margin-bottom: 24px;
    }

    h1 {
      font-size: 1.9rem;
      margin: 0 0 8px 0;
      color: var(--color-accent);
    }

    .subtitle {
      margin: 0;
      font-size: 0.95rem;
      color: var(--color-text-muted);
    }

    h2 {
      margin-top: 32px;
      margin-bottom: 12px;
      font-size: 1.35rem;
      color: var(--color-accent);
    }

    h3 {
      margin-top: 24px;
      margin-bottom: 8px;
      font-size: 1.1rem;
      color: var(--color-text);
    }

    h4 {
      margin-top: 18px;
      margin-bottom: 6px;
      font-size: 1.0rem;
      color: var(--color-text);
    }

    p {
      margin: 8px 0;
      font-size: 0.95rem;
    }

    .muted {
      color: var(--color-text-muted);
    }

    .toc {
      background-color: var(--color-accent-soft);
      border-radius: 6px;
      padding: 16px 18px;
      margin-bottom: 24px;
      border: 1px solid #C7D2FE;
      font-size: 0.95rem;
    }

    .toc-title {
      font-weight: 600;
      margin-bottom: 6px;
      color: var(--color-accent);
    }

    .toc ol {
      margin: 6px 0 0 18px;
      padding: 0;
    }

    .toc li {
      margin: 2px 0;
    }

    .section-lead {
      font-size: 0.98rem;
      color: var(--color-text-muted);
      margin-bottom: 8px;
    }

    .highlight-box {
      border-radius: 6px;
      border: 1px solid var(--color-border);
      background-color: #F9FAFB;
      padding: 12px 14px;
      font-size: 0.93rem;
      margin: 10px 0 16px 0;
    }

    .highlight-title {
      font-weight: 600;
      margin-bottom: 4px;
      color: var(--color-accent);
    }

    .equation-block {
      border-left: 3px solid var(--color-accent);
      background-color: #F9FAFB;
      padding: 10px 12px;
      margin: 12px 0;
      border-radius: 4px;
    }

    .equation-label {
      font-weight: 600;
      font-size: 0.92rem;
      color: var(--color-text-muted);
      margin-bottom: 4px;
    }

    .equation-text {
      font-family: var(--font-mono);
      font-size: 0.92rem;
      white-space: pre-wrap;
    }

    .equation-explanation {
      margin-top: 6px;
      font-size: 0.9rem;
      color: var(--color-text-muted);
    }

    figure.table-block {
      margin: 18px 0;
      padding: 12px 12px 10px 12px;
      border-radius: 6px;
      border: 1px solid var(--color-border);
      background-color: #F9FAFB;
    }

    figure.table-block > table {
      width: 100%;
      border-collapse: collapse;
      font-size: 0.9rem;
    }

    figure.table-block th,
    figure.table-block td {
      border: 1px solid var(--color-border);
      padding: 6px 8px;
      vertical-align: top;
    }

    figure.table-block th {
      background-color: var(--color-table-header);
      font-weight: 600;
      text-align: left;
    }

    figure.table-block caption {
      text-align: left;
      font-weight: 600;
      margin-bottom: 6px;
      color: var(--color-accent);
      font-size: 0.96rem;
    }

    .table-note {
      font-size: 0.85rem;
      color: var(--color-text-muted);
      margin-top: 6px;
    }

    .code-block {
      background-color: var(--color-code-bg);
      border-radius: 4px;
      border: 1px solid var(--color-border);
      padding: 8px 10px;
      font-family: var(--font-mono);
      font-size: 0.86rem;
      white-space: pre;
      overflow-x: auto;
      margin: 8px 0 10px 0;
    }

    .grid-two {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
      gap: 16px;
      margin: 10px 0 4px 0;
    }

    .tag {
      display: inline-block;
      padding: 2px 7px;
      border-radius: 999px;
      border: 1px solid var(--color-border);
      font-size: 0.8rem;
      color: var(--color-text-muted);
      margin-right: 4px;
      margin-bottom: 2px;
    }

    .small {
      font-size: 0.88rem;
    }

    .scenario-subtitle {
      font-weight: 600;
      font-size: 0.96rem;
      margin-top: 6px;
      margin-bottom: 4px;
      color: var(--color-accent);
    }

    .scenario-steps p {
      margin: 4px 0;
      font-size: 0.9rem;
    }

    .scenario-summary-table td,
    .scenario-summary-table th {
      font-size: 0.86rem;
    }

    @media print {
      body {
        padding: 0;
        background-color: #FFFFFF;
      }

      .page {
        box-shadow: none;
        border: none;
        margin: 0;
        padding: 0;
      }

      .toc {
        border: 1px solid #E5E7EB;
        box-shadow: none;
      }
    }
  </style>
</head>
<body>
  <div class="page">
    <header>
      <h1>STEPS FETP India Decision Aid</h1>
      <p class="subtitle">Technical appendix for the India Field Epidemiology Training Programme scale up tool</p>
    </header>

    <section class="toc">
      <div class="toc-title">Contents</div>
      <ol>
        <li><a href="#section-1">Introduction and purpose of the STEPS tool</a></li>
        <li><a href="#section-2">Overview of the preference study and mixed logit model</a></li>
        <li><a href="#section-3">Programme design attributes and configuration logic</a></li>
        <li><a href="#section-4">Cost construction methodology</a></li>
        <li><a href="#section-5">Cost component shares and scaling logic</a></li>
        <li><a href="#section-6">Programme cost per trainee and per cohort</a></li>
        <li><a href="#section-7">Opportunity cost inclusion and exclusion</a></li>
        <li><a href="#section-8">Endorsement probabilities and willingness to pay</a></li>
        <li><a href="#section-9">Epidemiological benefit construction</a></li>
        <li><a href="#section-10">Value per outbreak calibration and sensitivity</a></li>
        <li><a href="#section-11">Benefit cost ratios and net benefits</a></li>
        <li><a href="#section-12">National simulation and scaling</a></li>
        <li><a href="#section-13">Sensitivity analysis framework based on WTP and outbreak benefits</a></li>
        <li><a href="#section-14">Worked example: end to end calculation</a></li>
        <li><a href="#section-15">Copilot interpretation and JSON export</a></li>
        <li><a href="#section-16">Summary of assumptions and limitations</a></li>
      </ol>
    </section>

    <section id="section-1">
      <h2>1. Introduction and purpose of the STEPS tool</h2>
      <p class="section-lead">
        The STEPS FETP India Decision Aid is an interactive decision support tool that combines preference evidence, cost data and outbreak impact assumptions to help policy makers design and assess Field Epidemiology Training Programme (FETP) scale up scenarios in India.
      </p>

      <p>
        The tool has three main building blocks. First, it uses a discrete choice experiment (DCE) and a mixed logit model to quantify how key stakeholder groups value different FETP programme designs. These include the tier of training, career incentives, mentoring intensity, delivery mode and outbreak response time, alongside a monthly cost per trainee. Second, it applies detailed cost templates derived from World Health Organization (WHO), National Institute of Epidemiology (NIE) and National Centre for Disease Control (NCDC) data to translate an assumed monthly cost per trainee into a full cost envelope for each tier, including an optional opportunity cost component. Third, it maps training capacity into outbreak responses and monetary benefits, using a literature based calibration for the economic value of major outbreaks and explicit sensitivity ranges.
      </p>

      <p>
        The STEPS tool is scenario based. Users specify a combination of programme design attributes and cost, the number of cohorts and the planning horizon, and choose whether to include the opportunity cost of trainee time. The tool then produces endorsement probabilities, implied willingness to pay (WTP), epidemiological benefits, benefit cost ratios and net benefits for the configuration. All outputs are intended to support strategic planning and business case preparation rather than to provide forecasts.
      </p>

      <p>
        This technical appendix documents how each part of the tool works. It explains the preference model, programme attributes, cost construction, benefit formulas, WTP based benefits, sensitivity analysis and the Copilot interpretation tab. The aim is that a technically trained policy analyst can understand, reproduce and explain the calculations without needing to inspect the source code.
      </p>
    </section>

    <section id="section-2">
      <h2>2. Overview of the preference study and mixed logit model</h2>

      <h3>2.1 Discrete choice experiment and design</h3>
      <p>
        Preferences for FETP scale up options were measured using a discrete choice experiment (DCE) in which relevant stakeholders evaluated hypothetical FETP programmes that differed along key design attributes. Each choice task asked respondents to choose between two alternative FETP programme designs and an opt out option in which no additional FETP training would be funded.
      </p>

      <p>
        The experimental design varied the following attributes:
      </p>

      <div class="grid-two">
        <div>
          <p><span class="tag">Tier of training</span> Frontline, Intermediate, Advanced.</p>
          <p><span class="tag">Mentoring intensity</span> Low, Medium, High.</p>
          <p><span class="tag">Delivery mode</span> Blended, In person, Online.</p>
        </div>
        <div>
          <p><span class="tag">Career incentive</span> Government and partner certificate, University qualification, Government career pathway recognition.</p>
          <p><span class="tag">Outbreak response time</span> 30 days, 15 days or 7 days to detect and respond to priority outbreaks.</p>
          <p><span class="tag">Monthly cost per trainee</span> Several cost levels in Indian Rupees.</p>
        </div>
      </div>

      <p>
        Attribute levels were selected through expert consultation and piloting to span realistic policy relevant FETP designs while avoiding implausible combinations. Cost levels were selected so that the mixed logit model would have enough variation to identify marginal WTP for improvements in mentoring, delivery, career incentives and response time.
      </p>

      <h3>2.2 Mixed logit model specification used in STEPS</h3>
      <p>
        Choice data from the DCE were analysed using a mixed logit model that allows preferences to vary across respondents. For implementation in STEPS, the mean preference estimates from this mixed logit model are treated as fixed coefficients. These coefficients define the utility of a programme option and the opt out option as linear functions of the attributes.
      </p>

      <p>
        For a given programme option, the indirect utility is a sum of a programme constant, dummy coded attribute effects and a cost term. Indicator functions take the value one when the corresponding level is present and zero otherwise. Cost is expressed in thousands of Rupees per trainee per month so that the cost coefficient is interpreted per 1&nbsp;000 Rupees. The opt out option has its own constant that reflects the baseline attractiveness of not funding additional FETP training, inferred from the observed frequency of opt out choices in the DCE.
      </p>

      <h3>2.3 Coefficient values used in the tool</h3>
      <p>
        The STEPS tool uses the following mean coefficients from the mixed logit model. Cost is expressed per 1&nbsp;000 Rupees per trainee per month.
      </p>

      <figure class="table-block">
        <table>
          <caption>Table 1. Preference coefficients used in the STEPS tool</caption>
          <thead>
            <tr>
              <th>Parameter</th>
              <th>Interpretation</th>
              <th>Value</th>
              <th>Reference category</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>Programme constant</td>
              <td>Constant for all programme options</td>
              <td>0.168</td>
              <td>Included in all non opt out utilities</td>
            </tr>
            <tr>
              <td>Opt out constant</td>
              <td>Constant for no new FETP funding</td>
              <td>&minus;0.601</td>
              <td>Utility of opting out</td>
            </tr>
            <tr>
              <td>Intermediate tier</td>
              <td>Intermediate tier rather than frontline</td>
              <td>0.220</td>
              <td>Frontline tier</td>
            </tr>
            <tr>
              <td>Advanced tier</td>
              <td>Advanced tier rather than frontline</td>
              <td>0.487</td>
              <td>Frontline tier</td>
            </tr>
            <tr>
              <td>University qualification</td>
              <td>University qualification rather than certificate</td>
              <td>0.017</td>
              <td>Government and partner certificate</td>
            </tr>
            <tr>
              <td>Government career pathway</td>
              <td>Formal career pathway recognition rather than certificate</td>
              <td>&minus;0.122</td>
              <td>Government and partner certificate</td>
            </tr>
            <tr>
              <td>Medium mentoring</td>
              <td>Medium mentoring rather than low</td>
              <td>0.453</td>
              <td>Low mentoring</td>
            </tr>
            <tr>
              <td>High mentoring</td>
              <td>High mentoring rather than low</td>
              <td>0.640</td>
              <td>Low mentoring</td>
            </tr>
            <tr>
              <td>In person delivery</td>
              <td>Fully in person rather than blended</td>
              <td>&minus;0.232</td>
              <td>Blended delivery</td>
            </tr>
            <tr>
              <td>Online delivery</td>
              <td>Fully online rather than blended</td>
              <td>&minus;1.073</td>
              <td>Blended delivery</td>
            </tr>
            <tr>
              <td>Response time 15 days</td>
              <td>Detect and respond within 15 days rather than 30</td>
              <td>0.546</td>
              <td>30 day response time</td>
            </tr>
            <tr>
              <td>Response time 7 days</td>
              <td>Detect and respond within 7 days rather than 30</td>
              <td>0.610</td>
              <td>30 day response time</td>
            </tr>
            <tr>
              <td>Cost coefficient</td>
              <td>Cost per 1&nbsp;000 Rupees per trainee per month</td>
              <td>&minus;0.005</td>
              <td>Linear in cost</td>
            </tr>
          </tbody>
        </table>
        <p class="table-note">
          These values are stored in the script as <code>MXL_COEFS</code>. Tier, career, mentoring, delivery and response time are implemented as dummy coded attributes with the reference levels indicated in the final column.
        </p>
      </figure>

      <h3>2.4 Utility calculations in the script</h3>
      <p>
        In the script, the utility of a programme configuration is constructed by summing the relevant coefficients and the cost term. For a given configuration, the tool first calculates the cost per trainee per month in thousands of Rupees and then applies the cost coefficient. For example, if the user sets the cost slider at 20&nbsp;000 Rupees per trainee per month, the cost term in utility is &minus;0.005 multiplied by 20 (twenty thousands), which equals &minus;0.1. The non cost part of the utility is the sum of the programme constant and the selected attribute effects. The opt out utility is a single constant with value &minus;0.601.
      </p>
    </section>

    <section id="section-3">
      <h2>3. Programme design attributes and configuration logic</h2>
      <p class="section-lead">
        The configuration tab in STEPS collects information about the programme tier, career incentive, mentoring intensity, delivery mode, response time, cost per trainee, cohort size, number of cohorts and the planning horizon. The script converts these choices into model inputs.
      </p>

      <h3>3.1 Configuration variables used in the code</h3>
      <p>
        When the user presses the button to update the results, the <code>getConfigFromForm</code> function reads the current settings from the user interface and constructs a configuration object. The key elements are:
      </p>

      <ul class="small">
        <li>Tier: <code>tier</code> takes the value <code>frontline</code>, <code>intermediate</code> or <code>advanced</code>.</li>
        <li>Career incentive: <code>career</code> takes the value <code>certificate</code>, <code>uniqual</code> or <code>career_path</code>.</li>
        <li>Mentoring intensity: <code>mentorship</code> takes the value <code>low</code>, <code>medium</code> or <code>high</code>.</li>
        <li>Delivery mode: <code>delivery</code> takes the value <code>blended</code>, <code>inperson</code> or <code>online</code>.</li>
        <li>Response time: <code>response</code> is fixed to <code>"7"</code> days in the current version.</li>
        <li>Cost per trainee per month: <code>costPerTraineePerMonth</code> is read from the cost slider.</li>
        <li>Trainees per cohort: <code>traineesPerCohort</code> is read from the cohort size input.</li>
        <li>Number of cohorts: <code>cohorts</code> is read from the configuration tab.</li>
        <li>Planning horizon: <code>planningHorizonYears</code> is read from the settings tab and stored in <code>epiSettings</code>.</li>
        <li>Opportunity cost inclusion: <code>opportunityCostIncluded</code> is true when the opportunity cost switch is on.</li>
      </ul>

      <p>
        The configuration object is then passed to the calculation engine which produces endorsement, WTP, costs, epidemiological benefits and benefit cost ratios for that scenario. The tool also stores a scenario name and free text notes to help users document key configurations in the scenarios table.
      </p>

      <h3>3.2 Programme duration by tier</h3>
      <p>
        Each tier is assumed to have a fixed duration in months:
      </p>

      <figure class="table-block">
        <table>
          <caption>Table 2. Programme duration by tier</caption>
          <thead>
            <tr>
              <th>Tier</th>
              <th>Duration in months</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>Frontline</td>
              <td>3 months</td>
            </tr>
            <tr>
              <td>Intermediate</td>
              <td>12 months</td>
            </tr>
            <tr>
              <td>Advanced</td>
              <td>24 months</td>
            </tr>
          </tbody>
        </table>
        <p class="table-note">
          These durations are implemented via the <code>TIER_MONTHS</code> mapping in the script and are used when converting monthly cost per trainee into cohort cost and when scaling WTP per trainee per month to WTP per cohort.
        </p>
      </figure>
    </section>

    <section id="section-4">
      <h2>4. Cost construction methodology</h2>
      <p class="section-lead">
        Cost calculations in STEPS start from an assumed cost per trainee per month and translate this into a full programme cost per cohort with a transparent cost structure for each tier. The cost templates incorporate a harmonised set of direct cost components and an optional opportunity cost component.
      </p>

      <h3>4.1 Cost templates by tier</h3>
      <p>
        The script defines a cost template for each tier under <code>COST_TEMPLATES</code>. Each template has a tier specific opportunity cost rate and a list of cost components with shares that sum to one. For example, the combined template for the frontline tier has an opportunity cost rate of 1.09 and seven named cost components that cover salaries and benefits, office costs, training materials, workshops and travel. The intermediate and advanced tiers have similar templates with additional items such as trainee allowances, trainee equipment, international travel and other direct programme expenses.
      </p>

      <p>
        These templates are derived from detailed costing work using administrative and programme level data from implementing institutions. They provide a practical way to decompose the total programme cost into standardised components without requiring users to enter every input separately. The tool uses the templates to construct a cost breakdown table in the costing tab and to calculate the opportunity cost component when the user chooses to include it.
      </p>

      <h3>4.2 Role of opportunity cost rate</h3>
      <p>
        The opportunity cost rate in each template is applied to the programme cost per cohort to calculate the opportunity cost of trainee time. For example, if the frontline opportunity cost rate is 1.09 and the direct programme cost per cohort is 10 crore Rupees, the opportunity cost is 10 crore multiplied by 1.09, which equals 10.9 crore Rupees. The total economic cost per cohort is then 20.9 crore Rupees. When the opportunity cost switch is off, the rate is set to zero and total economic cost equals programme cost per cohort.
      </p>
    </section>

    <section id="section-5">
      <h2>5. Cost component shares and scaling logic</h2>
      <p class="section-lead">
        The cost templates include standardised component shares that describe how the total direct programme cost is allocated across specific cost categories. These shares are used to generate a detailed cost breakdown table for each scenario.
      </p>

      <h3>5.1 Component shares within templates</h3>
      <p>
        Within each tier specific template, cost components have <code>directShare</code> values that sum to one. For example, in the frontline combined template, in country programme staff salaries and benefits account for roughly 21 percent of direct cost, workshops account for about 11 percent and in country travel accounts for about 65 percent. Similar share structures apply for intermediate and advanced tiers, but with more weight on items such as trainee allowances and international travel at advanced level.
      </p>

      <h3>5.2 Scaling from per trainee cost to component amounts</h3>
      <p>
        For a selected configuration, the script calculates the programme cost per cohort and then splits this total across components using the shares in the chosen template. For each component, it also reports an implied monthly cost per trainee. This helps users understand how the simple cost per trainee per month input translates into operational budget envelopes for salaries, travel, training materials and other cost items.
      </p>
    </section>

    <section id="section-6">
      <h2>6. Programme cost per trainee and per cohort</h2>
      <p class="section-lead">
        Programme costs in STEPS are built from the user specified cost per trainee per month, the number of trainees per cohort and the duration of the programme. These are combined into a programme cost per cohort and then into a total economic cost per cohort when opportunity cost is included.
      </p>

      <h3>6.1 Programme cost per cohort</h3>
      <p>
        The function <code>computeCosts</code> takes a configuration object and calculates:
      </p>

      <div class="equation-block">
        <div class="equation-label">Programme cost per cohort</div>
        <div class="equation-text">
Programme cost per cohort = cost per trainee per month × months × trainees per cohort
        </div>
        <p class="equation-explanation">
          Months are determined by tier and trainees per cohort is the cohort size selected in the configuration tab. Programme cost per cohort is the direct financial cost of running one cohort, excluding opportunity cost unless explicitly added later.
        </p>
      </div>

      <h3>6.2 Opportunity cost per cohort and total economic cost</h3>
      <p>
        For the chosen tier, the script retrieves the opportunity cost rate from the corresponding cost template. When the opportunity cost switch is on, the opportunity cost is calculated as programme cost per cohort multiplied by this rate. Total economic cost per cohort is the sum of programme cost and opportunity cost. When the switch is off, the opportunity cost rate is set to zero and total economic cost equals programme cost per cohort.
      </p>
    </section>

    <section id="section-7">
      <h2>7. Opportunity cost inclusion and exclusion</h2>
      <p class="section-lead">
        Opportunity cost is treated as an optional component that users can include or exclude depending on the decision context. This design supports both financial planning and full economic evaluation.
      </p>

      <p>
        The opportunity cost toggle appears in the configuration tab. When the user turns it on, the label changes to indicate that opportunity cost is included and the total economic cost per cohort reflects both direct programme costs and the monetary value of trainee time spent in training rather than in their usual duties. When the toggle is off, the tool reports cost indicators based on direct programme costs only, which is useful when the focus is on budget requirements rather than full societal resource use.
      </p>

      <p>
        In the code, the toggle sets a boolean flag <code>opportunityCostIncluded</code> in the configuration object. The <code>computeCosts</code> function then uses this flag to apply either the tier specific opportunity cost rate or a rate of zero when calculating total economic cost per cohort.
      </p>
    </section>

    <section id="section-8">
      <h2>8. Endorsement probabilities and willingness to pay</h2>
      <p class="section-lead">
        The preference model in STEPS provides two key outputs for each configuration. The first is the endorsement rate, which is the predicted share of stakeholders who prefer the FETP option to the opt out alternative. The second is an implied willingness to pay (WTP) per trainee per month, derived by combining the non cost utility of the configuration with the cost coefficient.
      </p>

      <h3>8.1 Endorsement and opt out probabilities</h3>
      <p>
        For a given configuration, the script calculates the utility of the programme option and the opt out option, then converts these into endorsement and opt out probabilities using a standard logit formula. To improve numerical stability, it subtracts the maximum of the two utilities before exponentiation. The endorsement rate is reported as a percentage, and the opt out rate is the complement.
      </p>

      <h3>8.2 WTP per trainee per month</h3>
      <p>
        The implied WTP per trainee per month is calculated by dividing the non cost part of programme utility by the absolute value of the cost coefficient and then multiplying by 1&nbsp;000 to move from units of 1&nbsp;000 Rupees to Rupees. This produces an approximate rupee value per trainee per month that summarises how strongly stakeholders value the set of non cost attributes in the configuration.
      </p>

      <p>
        The results tab reports WTP per trainee per month, total WTP per cohort and total WTP across all cohorts. Tooltips and the WTP information icon explain that these values are indicative willingness to pay measures derived from stated preference data, not budget ceilings or actual payment commitments.
      </p>
    </section>

    <section id="section-9">
      <h2>9. Epidemiological benefit construction</h2>
      <p class="section-lead">
        The epidemiological module translates graduates and outbreak response assumptions into an indicative monetary benefit that represents the value of outbreaks handled by trained FETP graduates over a planning horizon. These benefits are based on modelling assumptions rather than observed savings.
      </p>

      <h3>9.1 Epidemiological settings</h3>
      <p>
        The script defines default epidemiological settings in <code>DEFAULT_EPI_SETTINGS</code> and allows users to update these through the settings and advanced settings tabs. Key parameters are:
      </p>

      <ul class="small">
        <li>Planning horizon in years for benefits.</li>
        <li>Discount rate for epidemiological benefits.</li>
        <li>Completion rate by tier.</li>
        <li>Outbreaks handled per graduate per year.</li>
        <li>Value per outbreak, in Rupees.</li>
      </ul>

      <p>
        Users can adjust the planning horizon, discount rate, value per outbreak, completion rate, outbreaks per graduate per year and value per graduate. Changes are stored in <code>epiSettings</code> and applied across all tiers.
      </p>

      <h3>9.2 Graduates and outbreak responses</h3>
      <p>
        For a given configuration, the epidemiological module performs the following steps. First, it calculates the number of enrolled trainees per cohort and adjusts this by the completion rate to obtain completed trainees per cohort. Second, it multiplies this by the endorsement rate to reflect that only a proportion of stakeholders support the configuration at the assumed level. This yields effective graduates per cohort. Third, it multiplies effective graduates by the number of cohorts to obtain graduates across all cohorts.
      </p>

      <p>
        The module then applies the assumed number of outbreaks handled per graduate per year and a response time multiplier to calculate outbreaks handled per year per cohort and at national scale. The response time multiplier is set to 1.5 for a 7 day response time in the current version, which gives additional weight to faster response in the outbreak benefit calculation.
      </p>

      <h3>9.3 Present value of outbreak benefits</h3>
      <p>
        The number of outbreaks handled per year per cohort is multiplied by the value per outbreak to obtain an annual outbreak benefit per cohort. This stream of annual benefits is converted into a present value using the planning horizon and discount rate specified in the settings. The present value factor is calculated using a standard annuity formula. The resulting present value represents the outbreak related epidemiological benefit per cohort, expressed in Rupees.
      </p>

      <p>
        In the current implementation, the value of graduates per se is set to zero. The epidemiological benefit therefore reflects potential outbreak related savings only. Users can, however, enter a non zero value per graduate in the advanced settings tab if they wish to explore scenarios where graduates generate other benefits beyond outbreak response.
      </p>
    </section>

    <section id="section-10">
      <h2>10. Value per outbreak calibration and sensitivity</h2>
      <p class="section-lead">
        The value per outbreak is a central assumption in the epidemiological benefit calculation. STEPS provides several tools for setting and testing this parameter.
      </p>

      <p>
        By default, the value per outbreak is set at four million Rupees. The settings and advanced settings tabs allow users to enter alternative values using absolute figures or shorthand notations such as millions, billions or crore. The script converts these into Rupees and updates epidemiological benefits accordingly. A sensitivity dropdown offers preset values of four, five, ten, twenty, thirty and forty million Rupees per outbreak and ensures that the outbreak value settings and sensitivity controls are synchronised.
      </p>

      <p>
        Preset values are intended to illustrate how benefit cost ratios and net benefits respond to changes in the assumed outbreak value. Users can also enter their own values based on country specific evidence or modelling. All such analyses remain indicative and should be interpreted as scenario exploration rather than precise estimation.
      </p>
    </section>

    <section id="section-11">
      <h2>11. Benefit cost ratios and net benefits</h2>
      <p class="section-lead">
        STEPS reports benefit cost ratios and net benefits at both cohort and national levels. These indicators combine epidemiological benefits with total economic costs to provide simple summary measures of economic performance under current assumptions.
      </p>

      <h3>11.1 Cohort level benefit cost ratio and net benefit</h3>
      <p>
        At cohort level, the benefit cost ratio compares the outbreak related epidemiological benefit per cohort with the total economic cost per cohort. When this ratio is above one, outbreak benefits exceed costs under the current assumptions. The net benefit per cohort is the difference between outbreak benefit and total economic cost per cohort. Positive values indicate that estimated outbreak related benefits are higher than costs.
      </p>

      <h3>11.2 National benefit cost ratio and net benefit</h3>
      <p>
        At national level, the tool multiplies cohort level total economic cost and outbreak benefit by the number of cohorts to obtain total cost and total outbreak benefit across all cohorts. It then calculates a national benefit cost ratio and a national net benefit. These indicators are reported in the national simulation tab and are also used in the sensitivity analysis module where they are combined with WTP based benefits.
      </p>
    </section>

    <section id="section-12">
      <h2>12. National simulation and scaling</h2>
      <p class="section-lead">
        The national simulation module takes the cohort level outputs and scales them to the configured number of cohorts over the planning horizon. It provides a simple national level view of costs, outbreak benefits, graduates and outbreak responses per year.
      </p>

      <p>
        The tool reports the total economic cost across all cohorts, the total outbreak related benefit across all cohorts, the national benefit cost ratio and the national net benefit. It also reports total graduates and outbreak responses per year at national scale. These outputs provide a starting point for national level business cases and can be exported to Excel and PDF for further analysis.
      </p>
    </section>

    <section id="section-13">
      <h2>13. Sensitivity analysis framework based on WTP and outbreak benefits</h2>
      <p class="section-lead">
        The sensitivity analysis module in STEPS extends the core outputs by combining WTP based benefits with outbreak related epidemiological benefits. It allows users to compare multiple saved scenarios, explore alternative outbreak values and adjust endorsement assumptions.
      </p>

      <h3>13.1 WTP based benefit measures</h3>
      <p>
        For each scenario, the tool calculates total WTP across all cohorts by multiplying WTP per trainee per month by programme duration in months and by the number of trainees per cohort, then by the number of cohorts. It also calculates an outbreak related WTP component by applying a fixed proportion to total WTP, which provides an indicative breakdown of WTP that is linked to outbreak response attributes.
      </p>

      <h3>13.2 Combined benefits and net benefits</h3>
      <p>
        The sensitivity tables combine WTP based benefits and outbreak related epidemiological benefits to construct several summary indicators. These include:
      </p>

      <ul class="small">
        <li>Total economic cost across all cohorts, in Rupees and millions of Rupees.</li>
        <li>Total WTP across all cohorts.</li>
        <li>Outbreak related WTP component across all cohorts.</li>
        <li>Outbreak related epidemiological benefit across all cohorts.</li>
        <li>Net present value based on WTP only, calculated as total WTP minus total economic cost.</li>
        <li>Net present value combining WTP and outbreak benefits, calculated as the sum of WTP and outbreak benefits minus total economic cost.</li>
        <li>Benefit cost ratios for WTP only and for combined WTP plus outbreak benefits.</li>
      </ul>

      <p>
        The sensitivity tables also display cohort level indicators such as endorsement rate, economic cost per cohort, WTP per cohort, outbreak benefit per cohort and net benefits per cohort for both WTP only and combined benefit definitions.
      </p>

      <h3>13.3 Endorsement overrides and benefit definitions</h3>
      <p>
        Users can override the endorsement rate used in the sensitivity calculations by entering an alternative endorsement percentage in the sensitivity tab. This allows exploration of more conservative or more optimistic stakeholder support scenarios. The benefit definition dropdown lets users choose between a WTP only benefit definition and an endorsement adjusted benefit definition in which total WTP is scaled by the chosen endorsement rate.
      </p>

      <p>
        The outbreak benefits switch in the sensitivity tab controls whether outbreak related epidemiological benefits are included in the combined benefit definition. When the switch is off, combined benefits equal total WTP and benefit cost ratios and net benefits are calculated on this basis alone. When the switch is on, combined benefits add WTP and outbreak benefits before comparing with costs.
      </p>
    </section>

    <section id="section-14">
      <h2>14. Worked example: end to end calculation</h2>
      <p class="section-lead">
        This section provides an illustrative worked example of how STEPS processes a single configuration from user inputs through to endorsement, WTP, costs, epidemiological benefits and benefit cost ratios. The numbers are indicative and are intended to show the calculation logic rather than to define a recommended scenario.
      </p>

      <h3>14.1 Example configuration</h3>
      <p>
        Consider a configuration with the following characteristics:
      </p>

      <ul class="small">
        <li>Tier: Intermediate.</li>
        <li>Career incentive: University qualification.</li>
        <li>Mentoring intensity: High.</li>
        <li>Delivery mode: Blended.</li>
        <li>Response time: Detect and respond within 7 days (fixed).</li>
        <li>Cost per trainee per month: 20&nbsp;000 Rupees.</li>
        <li>Trainees per cohort: 50.</li>
        <li>Number of cohorts: 4.</li>
        <li>Planning horizon: 5 years.</li>
        <li>Completion rate: 90 percent.</li>
        <li>Outbreaks per graduate per year: 0.5.</li>
        <li>Value per outbreak: 4 million Rupees.</li>
        <li>Discount rate for benefits: 3 percent.</li>
        <li>Opportunity cost: Included using the intermediate tier template.</li>
      </ul>

      <h3>14.2 Preference model and endorsement</h3>
      <p>
        For this configuration, the non cost part of programme utility is obtained by summing the programme constant, the intermediate tier effect, the university qualification effect, the high mentoring effect, the blended delivery reference (which has no coefficient) and the 7 day response time effect. Cost per trainee per month is 20&nbsp;000 Rupees, which is 20 in thousands, so the cost term is the cost coefficient multiplied by 20. Adding the cost term to the non cost utility gives the total programme utility. The opt out utility is &minus;0.601. These two utilities are then converted to endorsement and opt out probabilities using the logit formula.
      </p>

      <p>
        Suppose this results in an endorsement rate of about 75 percent and an opt out rate of about 25 percent for this configuration. These values are reported in the results tab and in the configuration summary panel.
      </p>

      <h3>14.3 WTP per trainee and per cohort</h3>
      <p>
        The implied WTP per trainee per month is calculated by dividing the non cost part of programme utility by the absolute value of the cost coefficient and multiplying by 1&nbsp;000. For this configuration, this might correspond to an indicative WTP per trainee per month of several tens of thousands of Rupees. This value is then multiplied by the programme duration in months and by the number of trainees per cohort to obtain WTP per cohort. Multiplying by the number of cohorts gives total WTP across all cohorts.
      </p>

      <h3>14.4 Programme costs and opportunity cost</h3>
      <p>
        Programme cost per cohort is calculated by multiplying 20&nbsp;000 Rupees per trainee per month by 12 months and 50 trainees. This yields 12 million Rupees as the direct programme cost for one intermediate cohort. The intermediate tier cost template has an opportunity cost rate of 0.35, so opportunity cost per cohort is 12 million multiplied by 0.35, which equals 4.2 million Rupees. Total economic cost per cohort is therefore 16.2 million Rupees. Across four cohorts, the total economic cost is 64.8 million Rupees.
      </p>

      <h3>14.5 Graduates, outbreak responses and outbreak benefits</h3>
      <p>
        Graduates per cohort are calculated as 50 trainees multiplied by a 90 percent completion rate, which gives 45 completed trainees. Applying the endorsement rate of 75 percent yields 33.75 effective graduates per cohort. Across four cohorts, there are 135 effective graduates.
      </p>

      <p>
        With 0.5 outbreaks handled per graduate per year, the number of outbreaks handled per year per cohort is 33.75 multiplied by 0.5, which equals about 16.9 outbreaks. With the 7 day response time multiplier of 1.5, the effective outbreak responses per year per cohort rise to about 25.3. Multiplying by 4 million Rupees per outbreak gives an annual outbreak benefit per cohort of roughly 101.2 million Rupees. Over a five year planning horizon with a three percent discount rate, the present value factor is a little under five. The outbreak related benefit per cohort is therefore in the order of several hundred million Rupees. The exact figures are shown in the epidemiological results tab.
      </p>

      <h3>14.6 Benefit cost ratios and sensitivity</h3>
      <p>
        Comparing the outbreak related benefit per cohort with the total economic cost per cohort yields a benefit cost ratio that is typically well above one for these settings, indicating that outbreak related benefits exceed costs under the assumed outbreak value and epidemiological parameters. At national scale, multiplying both benefits and costs by the number of cohorts leaves the benefit cost ratio unchanged but increases the absolute size of net benefits.
      </p>

      <p>
        The sensitivity tab then combines WTP based benefits and outbreak benefits to provide additional benefit cost measures and net present values under alternative outbreak values and endorsement assumptions. Users can save several configurations, compare them side by side and export the sensitivity tables to Excel and PDF for further examination.
      </p>
    </section>

    <section id="section-15">
      <h2>15. Copilot interpretation and JSON export</h2>
      <p class="section-lead">
        The Copilot tab in STEPS prepares a structured prompt and scenario JSON for use with Microsoft Copilot or similar tools to generate narrative policy briefs.
      </p>

      <h3>15.1 Structure of the Copilot prompt</h3>
      <p>
        The Copilot prompt combines three elements. The first is a set of instructions that describe the role of the analyst, the context of FETP scale up planning in India and the desired structure of the policy brief. The second is guidance on headings and content, including sections on background, scenario description, preference study evidence, costs, epidemiological effects, benefit cost results, distributional considerations and recommendations. The third is a JSON block that contains the full scenario configuration and the main quantitative outputs from the tool.
      </p>

      <p>
        When users press the Copilot button, the script rebuilds the prompt based on the current configuration and results. It then copies the full text of the prompt to the clipboard where possible and opens Microsoft Copilot in a new browser tab. Users can paste the prompt into Copilot and request a three to five page narrative brief that can later be edited in their preferred word processor.
      </p>

      <h3>15.2 Scenario JSON used by Copilot</h3>
      <p>
        The scenario JSON passed to Copilot includes metadata, configuration details, preference model outputs, cost results, epidemiological results and benefit cost results. It provides all of the quantitative information that Copilot needs to populate tables and narrative sections in the policy brief, without exposing the underlying code or requiring users to export raw data.
      </p>
    </section>

    <section id="section-16">
      <h2>16. Summary of assumptions and limitations</h2>
      <p class="section-lead">
        STEPS is designed as a transparent and flexible decision aid. Its outputs depend heavily on the assumptions chosen by users and on the structure of the underlying models.
      </p>

      <p>
        First, the preference model is based on stated preference data from a discrete choice experiment, not on revealed preferences. Endorsement and WTP estimates therefore reflect how stakeholders responded to hypothetical scenarios under survey conditions. They should be interpreted as indicative measures of support rather than as precise forecasts of behaviour or budget commitments.
      </p>

      <p>
        Second, the cost templates provide a harmonised structure for programme costs, but they are based on data from specific institutions and periods. Users should treat the resulting cost breakdowns as approximations and should update cost per trainee per month and template parameters over time as new costing information becomes available.
      </p>

      <p>
        Third, epidemiological benefits are based on assumptions about completion rates, outbreaks handled per graduate per year, response time multipliers, values per outbreak and planning horizons. These parameters are subject to uncertainty and may differ by setting and over time. The sensitivity analysis module is designed to help users explore how benefit cost ratios and net benefits change when these assumptions are modified.
      </p>

      <p>
        Finally, STEPS does not attempt to capture all dimensions of decision making about FETP scale up. Issues such as equity across states and cadres, implementation capacity, quality assurance, institutional readiness and long term system resilience are not fully represented in the quantitative outputs. Users should therefore treat STEPS as one input into a wider policy dialogue rather than as a stand alone decision rule.
      </p>

      <p>
        Despite these limitations, the combination of preference evidence, cost templates, outbreak modelling and WTP based sensitivity analysis provides a coherent and transparent framework for comparing alternative FETP scale up scenarios. The technical appendix documents the main components of this framework so that analysts can explain, adapt and extend the tool as needed.
      </p>
    </section>
  </div>
</body>
</html>
